<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portofolio - [Nama Anda/Perusahaan]</title>
    
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* Custom styles */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827; /* bg-gray-900 */
            color: #f3f4f6; /* text-gray-100 */
        }
        .nav-link-active {
            color: #ffffff;
            background-color: #4f46e5; /* bg-indigo-600 */
        }
        .content-section {
            display: none;
            animation: fadeIn 0.5s;
        }
        .content-section.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Edit Sidebar Styles */
        #edit-sidebar {
            position: fixed;
            top: 0;
            right: -400px; /* Start off-screen */
            width: 400px;
            height: 100%;
            background-color: #1f2937; /* bg-gray-800 */
            padding: 2rem;
            box-shadow: -10px 0 20px rgba(0,0,0,0.25);
            transition: right 0.3s ease-in-out;
            z-index: 50;
            overflow-y: auto;
        }
        #edit-sidebar.open {
            right: 0;
        }
        .sidebar-input {
            width: 100%;
            padding: 0.75rem;
            background-color: #374151; /* bg-gray-700 */
            border: 1px solid #4b5563; /* border-gray-600 */
            border-radius: 0.5rem;
            color: white;
            margin-top: 0.5rem;
        }
        .sidebar-label {
            display: block;
            color: #d1d5db; /* text-gray-300 */
            font-weight: bold;
            margin-top: 1rem;
        }
        .ai-button {
            background-color: #4f46e5;
            color: white;
            padding: 0.5rem 0.75rem;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            font-weight: bold;
            transition: background-color 0.2s;
            cursor: pointer;
            border: none;
        }
        .ai-button:hover {
            background-color: #4338ca;
        }
        .ai-button.loading {
            background-color: #6b7280;
            cursor: not-allowed;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Edit Mode Toggle Button -->
    <button id="toggle-edit-mode" class="fixed bottom-5 right-5 bg-indigo-600 text-white p-4 rounded-full shadow-lg z-50 hover:bg-indigo-700 transition-transform transform hover:scale-110">
        <i class="fas fa-pencil-alt"></i>
    </button>

    <!-- Edit Sidebar -->
    <aside id="edit-sidebar">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold text-white">Mode Edit</h2>
            <button id="close-sidebar" class="text-gray-400 hover:text-white text-3xl leading-none">&times;</button>
        </div>
        
        <!-- AI Settings -->
        <div class="mb-6 pb-6 border-b border-gray-700">
            <h3 class="text-xl font-semibold text-indigo-400">Pengaturan AI</h3>
            <label for="edit-gemini-key" class="sidebar-label">Kunci API Gemini</label>
            <input type="password" id="edit-gemini-key" class="sidebar-input" placeholder="Masukkan kunci API Anda">
        </div>

        <!-- General Settings -->
        <div class="mb-6 pb-6 border-b border-gray-700">
            <h3 class="text-xl font-semibold text-indigo-400">Info Umum</h3>
            <label for="edit-nama" class="sidebar-label">Nama Anda/Perusahaan</label>
            <input type="text" id="edit-nama" class="sidebar-input">
            <label for="edit-profesi" class="sidebar-label">Profesi</label>
            <input type="text" id="edit-profesi" class="sidebar-input">
            <label for="edit-kontak-email" class="sidebar-label">Email Kontak</label>
            <input type="email" id="edit-kontak-email" class="sidebar-input">
        </div>

        <!-- About Settings -->
        <div class="mb-6 pb-6 border-b border-gray-700">
            <h3 class="text-xl font-semibold text-indigo-400">Tentang Saya</h3>
            <label for="edit-foto-profil" class="sidebar-label">URL Foto Profil</label>
            <input type="text" id="edit-foto-profil" class="sidebar-input">
            <div class="flex justify-between items-center mt-4">
                <label for="edit-tentang" class="sidebar-label !mt-0">Deskripsi Tentang Saya</label>
                <button id="generate-about-ai" class="ai-button"><i class="fas fa-magic-sparkles"></i> Generate AI</button>
            </div>
            <textarea id="edit-tentang" rows="5" class="sidebar-input"></textarea>
        </div>

        <!-- Projects Settings -->
        <div class="mb-6 pb-6 border-b border-gray-700">
            <h3 class="text-xl font-semibold text-indigo-400">Proyek</h3>
            <div id="edit-proyek-list"></div>
            <button id="add-project-btn" class="mt-4 w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                <i class="fas fa-plus"></i> Tambah Proyek
            </button>
        </div>
        
        <!-- Donation Settings (Private) -->
        <div class="mb-6">
            <h3 class="text-xl font-semibold text-indigo-400">Catatan Donasi (Pribadi)</h3>
            <label for="edit-bca-nama" class="sidebar-label">Nama Akun BCA</label>
            <input type="text" id="edit-bca-nama" class="sidebar-input">
            <label for="edit-bca-nomor" class="sidebar-label">Nomor Rekening BCA</label>
            <input type="text" id="edit-bca-nomor" class="sidebar-input">
            <label for="edit-mandiri-nama" class="sidebar-label">Nama Akun Mandiri</label>
            <input type="text" id="edit-mandiri-nama" class="sidebar-input">
            <label for="edit-mandiri-nomor" class="sidebar-label">Nomor Rekening Mandiri</label>
            <input type="text" id="edit-mandiri-nomor" class="sidebar-input">
            <label for="edit-saweria-url" class="sidebar-label">URL Halaman Saweria</label>
            <input type="text" id="edit-saweria-url" class="sidebar-input">
        </div>
    </aside>

    <!-- Main Container -->
    <div class="container mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">

        <!-- Header and Navigation -->
        <header class="py-6">
            <nav class="flex items-center justify-between">
                <div class="text-2xl font-bold text-white">
                    <a href="#" class="flex items-center gap-x-3 hover:opacity-80 transition-opacity">
                        <img id="display-ikon-header" src="" alt="Ikon Profil" class="w-10 h-10 rounded-full object-cover">
                        <span id="display-nama-header">[Nama Anda/Perusahaan]</span>
                    </a>
                </div>
                <ul class="hidden md:flex items-center space-x-2">
                    <li><a href="#proyek" class="nav-link nav-link-active text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors" data-target="proyek">Proyek</a></li>
                    <li><a href="#tentang" class="nav-link text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors" data-target="tentang">Tentang Saya</a></li>
                    <li><a href="#kontak" class="nav-link text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors" data-target="kontak">Kontak</a></li>
                </ul>
                 <div class="md:hidden">
                    <select id="mobile-nav" class="bg-gray-800 border border-gray-700 text-white text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-full p-2.5">
                        <option value="proyek">Proyek</option>
                        <option value="tentang">Tentang</option>
                        <option value="kontak">Kontak</option>
                    </select>
                </div>
            </nav>
        </header>

        <main>
            <!-- Sections will be rendered here by JS -->
            <section id="proyek" class="content-section active py-12"></section>
            <section id="tentang" class="content-section py-12"></section>
            <section id="kontak" class="content-section py-12"></section>
        </main>

        <!-- Footer -->
        <footer class="text-center py-8 mt-12 border-t border-gray-800">
            <p class="text-gray-500">&copy; <span id="current-year"></span> <span id="display-nama-footer">[Nama Anda/Perusahaan]</span>. Dibuat dengan Penuh Semangat.</p>
        </footer>

    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // --- DATA ---
        let portfolioData = {
            geminiApiKey: "",
            nama: "Nama Anda",
            profesi: "Profesi Anda",
            kontakEmail: "email@contoh.com",
            fotoProfil: "https://placehold.co/200x200/4338ca/ffffff?text=Foto",
            tentang: "Tuliskan profil singkat Anda di sini. Ceritakan tentang passion Anda, keahlian utama, dan pengalaman yang relevan.",
            proyek: [
                { id: `proj_${Date.now()}`, gambar: "https://placehold.co/600x400/1f2937/ffffff?text=Proyek+1", judul: "Judul Proyek Pertama", deskripsi: "Deskripsi singkat...", tautan: "#" },
            ],
            donasi: {
                bca: { nama: "Atas Nama BCA", nomor: "1234567890" },
                mandiri: { nama: "Atas Nama Mandiri", nomor: "0987654321" },
                saweria: { url: "https://saweria.co/username" }
            }
        };

        // --- ELEMENTS ---
        const sidebar = document.getElementById('edit-sidebar');
        const toggleButton = document.getElementById('toggle-edit-mode');
        const closeButton = document.getElementById('close-sidebar');
        const addProjectBtn = document.getElementById('add-project-btn');

        // --- AI GENERATION FUNCTION ---
        async function generateWithAI(prompt, buttonElement, targetTextarea) {
            const apiKey = portfolioData.geminiApiKey;
            if (!apiKey) {
                alert("Harap masukkan Kunci API Gemini Anda di Pengaturan AI.");
                return;
            }

            const originalButtonContent = buttonElement.innerHTML;
            buttonElement.innerHTML = `<i class="fas fa-spinner fa-spin"></i> Generating...`;
            buttonElement.classList.add('loading');
            buttonElement.disabled = true;

            try {
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                const payload = {
                    contents: [{
                        parts: [{ text: prompt }]
                    }]
                };

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error.message || `HTTP error! status: ${response.status}`);
                }

                const result = await response.json();
                
                if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts.length > 0) {
                    const generatedText = result.candidates[0].content.parts[0].text;
                    targetTextarea.value = generatedText;
                    // Trigger input event to update the main page content
                    targetTextarea.dispatchEvent(new Event('input', { bubbles: true }));
                } else {
                    throw new Error("Respons API tidak valid atau kosong.");
                }

            } catch (error) {
                console.error("Error with Gemini API:", error);
                alert(`Gagal menghasilkan teks: ${error.message}`);
            } finally {
                buttonElement.innerHTML = originalButtonContent;
                buttonElement.classList.remove('loading');
                buttonElement.disabled = false;
            }
        }

        // --- RENDER FUNCTIONS ---
        function renderPageContent() {
            document.getElementById('display-ikon-header').src = portfolioData.fotoProfil;
            document.getElementById('display-nama-header').textContent = portfolioData.nama;
            document.getElementById('display-nama-footer').textContent = portfolioData.nama;
            renderProyekSection();
            renderTentangSection();
            renderKontakSection();
        }

        function renderProyekSection() {
            const section = document.getElementById('proyek');
            let content = `<div class="text-center mb-12"><h1 class="text-4xl font-extrabold tracking-tight text-white sm:text-5xl md:text-6xl">Portofolio Proyek</h1></div><div id="project-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">`;
            portfolioData.proyek.forEach(p => {
                content += `<div class="bg-gray-800 rounded-xl overflow-hidden shadow-lg transform hover:scale-105 transition-transform duration-300 ease-in-out"><img class="w-full h-56 object-cover" src="${p.gambar}" alt="Gambar ${p.judul}"><div class="p-6"><h3 class="font-bold text-xl mb-2 text-white">${p.judul}</h3><p class="text-gray-400 text-base mb-4">${p.deskripsi}</p><a href="${p.tautan}" target="_blank" class="inline-block bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg transition-colors">Lihat Proyek &rarr;</a></div></div>`;
            });
            content += `</div>`;
            section.innerHTML = content;
        }

        function renderTentangSection() {
            const section = document.getElementById('tentang');
            section.innerHTML = `<div class="text-center mb-12"><h1 class="text-4xl font-extrabold tracking-tight text-white sm:text-5xl md:text-6xl">Tentang Saya</h1></div><div class="bg-gray-800 rounded-xl shadow-lg p-8 md:p-12 flex flex-col md:flex-row items-center gap-8"><img id="display-foto-profil" class="w-32 h-32 md:w-48 md:h-48 rounded-full object-cover ring-4 ring-indigo-500" src="${portfolioData.fotoProfil}" alt="Foto Profil"><div class="text-center md:text-left"><h2 id="display-nama-tentang" class="text-3xl font-bold text-white">${portfolioData.nama}</h2><p id="display-profesi" class="text-indigo-400 font-semibold text-lg mt-1">${portfolioData.profesi}</p><p id="display-tentang" class="mt-4 text-gray-300 max-w-2xl">${portfolioData.tentang}</p></div></div>`;
        }
        
        function renderKontakSection() {
            const section = document.getElementById('kontak');
            section.innerHTML = `<div class="text-center mb-12"><h1 class="text-4xl font-extrabold tracking-tight text-white sm:text-5xl md:text-6xl">Hubungi Saya</h1><p class="mt-3 max-w-md mx-auto text-base text-gray-400 sm:text-lg md:mt-5 md:text-xl md:max-w-3xl">Anda bisa menghubungi saya melalui email di <a href="mailto:${portfolioData.kontakEmail}" class="text-indigo-400 hover:underline">${portfolioData.kontakEmail}</a> atau melalui formulir di bawah ini.</p></div><div class="max-w-lg mx-auto bg-gray-800 rounded-xl shadow-lg p-8"><form id="contact-form"><div id="form-content"><div class="mb-4"><label for="name" class="block text-gray-300 text-sm font-bold mb-2">Nama</label><input type="text" id="name" required class="sidebar-input"></div><div class="mb-4"><label for="email" class="block text-gray-300 text-sm font-bold mb-2">Email</label><input type="email" id="email" required class="sidebar-input"></div><div class="mb-6"><label for="message" class="block text-gray-300 text-sm font-bold mb-2">Pesan</label><textarea id="message" rows="4" required class="sidebar-input"></textarea></div><div class="text-center"><button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-lg transition-colors">Kirim Pesan</button></div></div><div id="success-message" class="hidden text-center"><h3 class="text-2xl font-bold text-green-400">Pesan Terkirim!</h3><p class="text-gray-300 mt-2">Terima kasih.</p></div></form></div>`;
            document.getElementById('contact-form').addEventListener('submit', function(e) { e.preventDefault(); document.getElementById('form-content').style.display = 'none'; document.getElementById('success-message').classList.remove('hidden'); });
        }
        
        function renderSidebarForms() {
            document.getElementById('edit-gemini-key').value = portfolioData.geminiApiKey;
            document.getElementById('edit-nama').value = portfolioData.nama;
            document.getElementById('edit-profesi').value = portfolioData.profesi;
            document.getElementById('edit-kontak-email').value = portfolioData.kontakEmail;
            document.getElementById('edit-foto-profil').value = portfolioData.fotoProfil;
            document.getElementById('edit-tentang').value = portfolioData.tentang;
            document.getElementById('edit-bca-nama').value = portfolioData.donasi.bca.nama;
            document.getElementById('edit-bca-nomor').value = portfolioData.donasi.bca.nomor;
            document.getElementById('edit-mandiri-nama').value = portfolioData.donasi.mandiri.nama;
            document.getElementById('edit-mandiri-nomor').value = portfolioData.donasi.mandiri.nomor;
            document.getElementById('edit-saweria-url').value = portfolioData.donasi.saweria.url;
            renderProjectEditForms();
        }

        function renderProjectEditForms() {
            const projectList = document.getElementById('edit-proyek-list');
            projectList.innerHTML = '';
            portfolioData.proyek.forEach((p, index) => {
                const formHtml = `<div class="p-4 border border-gray-700 rounded-lg mb-4" data-project-id="${p.id}"><div class="flex justify-between items-center mb-2"><p class="font-semibold text-white">Proyek ${index + 1}</p><button class="remove-project-btn text-red-500 hover:text-red-400" data-id="${p.id}"><i class="fas fa-trash"></i></button></div><label class="sidebar-label">URL Gambar</label><input type="text" class="sidebar-input edit-project-input" data-field="gambar" value="${p.gambar}"><label class="sidebar-label">Judul</label><input type="text" class="sidebar-input edit-project-input" data-field="judul" value="${p.judul}"><div class="flex justify-between items-center mt-4"><label class="sidebar-label !mt-0">Deskripsi</label><button class="ai-button generate-project-ai-btn"><i class="fas fa-magic-sparkles"></i> Generate AI</button></div><textarea rows="3" class="sidebar-input edit-project-input" data-field="deskripsi">${p.deskripsi}</textarea><label class="sidebar-label">Tautan Proyek</label><input type="text" class="sidebar-input edit-project-input" data-field="tautan" value="${p.tautan}"></div>`;
                projectList.innerHTML += formHtml;
            });
            addProjectEventListeners();
        }
        
        function addProjectEventListeners() {
            document.querySelectorAll('.edit-project-input').forEach(input => {
                input.addEventListener('input', (e) => {
                    const id = e.target.closest('[data-project-id]').dataset.projectId;
                    const field = e.target.dataset.field;
                    const project = portfolioData.proyek.find(p => p.id === id);
                    if (project) {
                        project[field] = e.target.value;
                        renderProyekSection();
                    }
                });
            });
            document.querySelectorAll('.remove-project-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const id = e.currentTarget.dataset.id;
                    portfolioData.proyek = portfolioData.proyek.filter(p => p.id !== id);
                    renderProyekSection();
                    renderProjectEditForms();
                });
            });
            document.querySelectorAll('.generate-project-ai-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const container = e.target.closest('[data-project-id]');
                    const id = container.dataset.projectId;
                    const project = portfolioData.proyek.find(p => p.id === id);
                    const prompt = `Buat deskripsi proyek portofolio yang menarik, singkat, dan profesional untuk sebuah proyek dengan judul "${project.judul}". Jelaskan secara singkat tujuan dan teknologi yang mungkin digunakan.`;
                    const targetTextarea = container.querySelector('textarea[data-field="deskripsi"]');
                    generateWithAI(prompt, e.currentTarget, targetTextarea);
                });
            });
        }

        // --- EVENT LISTENERS ---
        toggleButton.addEventListener('click', () => sidebar.classList.add('open'));
        closeButton.addEventListener('click', () => sidebar.classList.remove('open'));

        document.getElementById('edit-gemini-key').addEventListener('input', (e) => { portfolioData.geminiApiKey = e.target.value; });
        document.getElementById('edit-nama').addEventListener('input', (e) => { portfolioData.nama = e.target.value; renderPageContent(); });
        document.getElementById('edit-profesi').addEventListener('input', (e) => { portfolioData.profesi = e.target.value; renderTentangSection(); });
        document.getElementById('edit-kontak-email').addEventListener('input', (e) => { portfolioData.kontakEmail = e.target.value; renderKontakSection(); });
        document.getElementById('edit-foto-profil').addEventListener('input', (e) => { portfolioData.fotoProfil = e.target.value; renderPageContent(); });
        document.getElementById('edit-tentang').addEventListener('input', (e) => { portfolioData.tentang = e.target.value; renderTentangSection(); });
        
        document.getElementById('generate-about-ai').addEventListener('click', (e) => {
            const prompt = `Buat deskripsi "Tentang Saya" untuk portofolio seorang ${portfolioData.profesi}. Deskripsi harus profesional, ramah, dan menyoroti keahlian serta passion dalam bidang tersebut.`;
            const targetTextarea = document.getElementById('edit-tentang');
            generateWithAI(prompt, e.currentTarget, targetTextarea);
        });

        addProjectBtn.addEventListener('click', () => {
            portfolioData.proyek.push({ id: `proj_${Date.now()}`, gambar: "https://placehold.co/600x400/1f2937/ffffff?text=Proyek+Baru", judul: "Proyek Baru", deskripsi: "Deskripsi...", tautan: "#" });
            renderProyekSection();
            renderProjectEditForms();
        });
        
        // Donation Listeners (private data saving)
        document.getElementById('edit-bca-nama').addEventListener('input', (e) => { portfolioData.donasi.bca.nama = e.target.value; });
        document.getElementById('edit-bca-nomor').addEventListener('input', (e) => { portfolioData.donasi.bca.nomor = e.target.value; });
        document.getElementById('edit-mandiri-nama').addEventListener('input', (e) => { portfolioData.donasi.mandiri.nama = e.target.value; });
        document.getElementById('edit-mandiri-nomor').addEventListener('input', (e) => { portfolioData.donasi.mandiri.nomor = e.target.value; });
        document.getElementById('edit-saweria-url').addEventListener('input', (e) => { portfolioData.donasi.saweria.url = e.target.value; });

        // --- INITIALIZATION ---
        renderPageContent();
        renderSidebarForms();
        document.getElementById('current-year').textContent = new Date().getFullYear();

        // --- NAVIGATION LOGIC ---
        const navLinks = document.querySelectorAll('.nav-link');
        const mobileNav = document.getElementById('mobile-nav');
        const sections = document.querySelectorAll('.content-section');
        function switchTab(targetId) {
            sections.forEach(s => s.classList.remove('active'));
            navLinks.forEach(l => l.classList.remove('nav-link-active'));
            
            document.getElementById(targetId)?.classList.add('active');
            document.querySelector(`.nav-link[data-target="${targetId}"]`)?.classList.add('nav-link-active');
            mobileNav.value = targetId;
        }
        navLinks.forEach(link => link.addEventListener('click', (e) => { e.preventDefault(); switchTab(e.currentTarget.dataset.target); }));
        mobileNav.addEventListener('change', (e) => switchTab(e.currentTarget.value));
    });
    </script>
</body>
</html>
